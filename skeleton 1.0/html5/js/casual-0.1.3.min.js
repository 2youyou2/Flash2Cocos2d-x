var casual={version:"0.1.3",trace:function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);typeof console!="undefined"&&typeof console.log!="undefined"&&console.log(a.join(" "))},inherit:function(a,b){var d=function(){};d.prototype=b.prototype;a.superClass=b.prototype;a.prototype=new d;a.prototype.constructor=a},delegate:function(a,b,d){var c=b||window;if(arguments.length>2){var e=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);
Array.prototype.unshift.apply(b,e);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}}};casual.copy=function(a,b,d){if(typeof a!=="object")return a;var c=a.valueOf();if(a!=c)return new a.constructor(c);if(a instanceof a.constructor&&a.constructor!==Object){var c=b?new b:casual.clone(a.constructor.prototype),e;for(e in a)if(b||a.hasOwnProperty(e))c[e]=a[e]}else for(e in c={},a)c[e]=a[e];if(d)for(e in d)c[e]=d[e];return c};
casual.clone=function(a){casual.__cloneFunc.prototype=a;return new casual.__cloneFunc};casual.__cloneFunc=function(){};casual.getDOM=function(a){return document.getElementById(a)};casual.createDOM=function(a,b){var d=document.createElement(a),c;for(c in b){var e=b[c];if(c=="style")for(var f in e)d.style[f]=e[f];else d[c]=e}return d};(function(){var a=function(b,d,a,e,f,g){this.a=b!=void 0?b:1;this.b=d!=void 0?d:0;this.c=a!=void 0?a:0;this.d=e!=void 0?e:1;this.tx=f!=void 0?f:0;this.ty=g!=void 0?g:0};casual.Matrix=a;a.prototype.concat=function(b){var d=this.a,a=this.c,e=this.tx;this.a=d*b.a+this.b*b.c;this.b=d*b.b+this.b*b.d;this.c=a*b.a+this.d*b.c;this.d=a*b.b+this.d*b.d;this.tx=e*b.a+this.ty*b.c+b.tx;this.ty=e*b.b+this.ty*b.d+b.ty};a.prototype.concatTransform=function(b,d,c,e,f,g,i){var h=1,j=0;f%360&&(f=f*Math.PI/180,h=Math.cos(f),
j=Math.sin(f));g!=0&&(this.tx-=g);i!=0&&(this.ty-=i);this.concat(new a(h*c,j*c,-j*e,h*e,b,d))};a.prototype.rotate=function(b){var d=Math.cos(b),b=Math.sin(b),a=this.a,e=this.c,f=this.tx;this.a=a*d-this.b*b;this.b=a*b+this.b*d;this.c=e*d-this.d*b;this.d=e*b+this.d*d;this.tx=f*d-this.ty*b;this.ty=f*b+this.ty*d};a.prototype.scale=function(b,d){this.a*=b;this.d*=d;this.tx*=b;this.ty*=d};a.prototype.translate=function(b,d){this.tx+=b;this.ty+=d};a.prototype.identity=function(){this.a=this.d=1;this.b=this.c=
this.tx=this.ty=0};a.prototype.invert=function(){var b=this.a,d=this.b,a=this.c,e=this.d,f=this.tx,g=b*e-d*a;this.a=e/g;this.b=-d/g;this.c=-a/g;this.d=b/g;this.tx=(a*this.ty-e*f)/g;this.ty=-(b*this.ty-d*f)/g};a.prototype.clone=function(){return new a(this.a,this.b,this.c,this.d,this.tx,this.ty)};a.prototype.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}})();(function(){var a=function(b,d,a,e){this.x=b!=void 0?b:0;this.y=d!=void 0?d:0;this.width=a!=void 0?a:0;this.height=e!=void 0?e:0};casual.Rectangle=a;a.prototype.intersects=function(b){return this.x<=b.x+b.width&&b.x<=this.x+this.width&&this.y<=b.y+b.height&&b.y<=this.y+this.height};a.prototype.intersection=function(b){var d=Math.max(this.x,b.x),c=Math.min(this.x+this.width,b.x+b.width);if(d<=c){var e=Math.max(this.y,b.y),b=Math.min(this.y+this.height,b.y+b.height);if(e<=b)return new a(d,e,c-d,b-e)}return null};
a.prototype.containsPoint=function(b,d){return this.x<=b&&b<=this.x+this.width&&this.y<=d&&d<=this.y+this.height};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)};a.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}})();(function(){var a={_counter:0};casual.NameUtil=a;a.getUID=function(){return a._counter++};a.createUniqueName=function(b){var d=b.charCodeAt(b.length-1);d>=48&&d<=57&&(b+="_");return b+a.getUID()};a.displayObjectToString=function(b){for(var d;b!=null;b=b.parent){var a=b.id!=null?b.id:b.name;d=d==null?a:a+"."+d;if(b==b.parent||b.parent instanceof Stage)break}return d}})();(function(){var a=function(b,d,a){this.type=b;this.params=this.currentTarget=this.target=null;this.bubbles=d!=void 0?d:!1;this.cancelable=a!=void 0?a:!1};casual.EventBase=a;a.prototype.stopPropagation=function(){};a.prototype.preventDefault=function(){};a.prototype.clone=function(){return casual.copy(this)};a.prototype.dispose=function(){delete this.type;delete this.target;delete this.currentTarget;delete this.params};a.prototype.toString=function(){return"[EventBase type="+this.type+"]"}})();(function(){var a=function(b,d,a){casual.EventBase.call(this,b,d,a);this.mouseY=this.mouseX=0};casual.inherit(a,casual.EventBase);casual.StageEvent=a;a.ENTER_FRAME="enterframe";a.MOUSE_DOWN="mousedown";a.MOUSE_UP="mouseup";a.MOUSE_MOVE="mousemove";a.MOUSE_OVER="mouseover";a.MOUSE_OUT="mouseout";a.supportTouch=function(){return"ontouchstart"in document};a.prototype.toString=function(){return"[StageEvent type="+this.type+", mouseX="+this.mouseX+", mouseY="+this.mouseY+"]"}})();(function(){function a(b,d){var a=!1,c;for(c in d.map)if(c!="src"){a=!0;break}return!a?(b.splice(d.index,1),!0):!1}function b(b,d,a){for(var c=0;c<b.length;c++){var h=b[c];if(h.src===d)return{map:h,index:c}}return a?(h={src:d},b.push(h),{map:h,index:b.length-1}):null}function d(b,d,a){return b.hasOwnProperty(d)?b[d]:a?b[d]=[]:null}var c=casual.EventManager={_maps:[]};c.addEventListener=function(a,c,g){a=b(this._maps,a,!0);c=d(a.map,c,!0);return c.indexOf(g)==-1?(c.push(g),!0):!1};c.removeEventListener=
function(c,f,g){c=b(this._maps,c,!1);if(c==null)return!1;var i=d(c.map,f,!1);if(i==null)return!1;for(var h=0;h<i.length;h++)if(i[h]===g)return i.splice(h,1),i.length==0&&(delete c.map[f],a(this._maps,c)),!0;return!1};c.removeEventListenerByType=function(d,c){var g=b(this._maps,d,!1);return g&&g.map.hasOwnProperty(c)?(delete g.map[c],a(this._maps,g),!0):!1};c.removeAllEventListeners=function(b){for(var d=0;d<this._maps.length;d++)if(this._maps[d].src===b)return this._maps.splice(d,1),!0;return!1};
c.dispatchEvent=function(a,c){var g=b(this._maps,a,!1);if(g==null)return!1;g=d(g.map,c.type,!1);if(g==null)return!1;if(!c.target)c.target=a;for(var i=0;i<g.length;i++){var h=g[i];typeof h=="function"&&h.call(a,c)}return!0};c.hasEventListener=function(a,c){var g=b(this._maps,a,!1);return g==null?!1:(g=d(g.map,c,!1))&&g.length>0}})();(function(){var a=casual.EventDispatcher=function(){};a.prototype.addEventListener=function(b,d){return casual.EventManager.addEventListener(this,b,d)};a.prototype.removeEventListener=function(b,d){return d?casual.EventManager.removeEventListener(this,b,d):casual.EventManager.removeEventListenerByType(this,b)};a.prototype.removeAllEventListeners=function(){return casual.EventManager.removeAllEventListeners(this)};a.prototype.dispatchEvent=function(b){return casual.EventManager.dispatchEvent(this,
b)};a.prototype.hasEventListener=function(b){return casual.EventManager.hasEventListener(this,b)}})();(function(){var a=function(){casual.EventDispatcher.call(this);this.name=NameUtil.createUniqueName("DisplayObject");this.id=null;this.height=this.width=this.y=this.x=0;this.scaleY=this.scaleX=this.alpha=1;this.regY=this.regX=this.rotation=0;this.mouseEnabled=this.visible=!0;this.useHandCursor=!1;this.stage=this.parent=null};casual.inherit(a,casual.EventDispatcher);casual.DisplayObject=a;var b=document.createElement("canvas");b.width=b.height=1;a.__hitTestContext=b.getContext("2d");a.__hitTestTolerance=
100;a.prototype.getCurrentWidth=function(){return Math.abs(this.width*this.scaleX)};a.prototype.getCurrentHeight=function(){return Math.abs(this.height*this.scaleY)};a.prototype.getStage=function(){if(this.stage)return this.stage;for(var b=this;b.parent;)b=b.parent;return b instanceof casual.Stage?this.stage=b:null};a.prototype.localToGlobal=function(b,a){var e=this.getConcatenatedMatrix();if(e==null)return{x:0,y:0};var f=new casual.Matrix(1,0,0,1,b,a);f.concat(e);return{x:f.tx,y:f.ty}};a.prototype.globalToLocal=
function(b,a){var e=this.getConcatenatedMatrix();if(e==null)return{x:0,y:0};e.invert();var f=new casual.Matrix(1,0,0,1,b,a);f.concat(e);return{x:f.tx,y:f.ty}};a.prototype.localToTarget=function(b,a,e){b=this.localToGlobal(b,a);return e.globalToLocal(b.x,b.y)};a.prototype.getConcatenatedMatrix=function(){for(var b=new casual.Matrix,a=this;a!=null;a=a.parent)if(b.concatTransform(a.x,a.y,a.scaleX,a.scaleY,a.rotation,a.regX,a.regY),a instanceof casual.Stage)break;return b};a.prototype._transform=function(b,
a){if(a){var e=this.localToGlobal(0,0);(e.x!=0||e.y!=0)&&b.translate(e.x,e.y)}else b.translate(this.x,this.y);this.rotation%360>0&&b.rotate(this.rotation%360/180*Math.PI);(this.scaleX!=1||this.scaleY!=1)&&b.scale(this.scaleX,this.scaleY);a||b.translate(-this.regX,-this.regY);b.globalAlpha*=this.alpha};a.prototype._render=function(b,a,e){this.visible&&!(this.alpha<=0)&&(b.save(),a||this._transform(b,e),this.render(b),b.restore())};a.prototype.render=function(){};a.prototype.hitTestPoint=function(b,
c,e,f){if(!e)return f=this.globalToLocal(b,c),f.x>=0&&f.x<=this.getCurrentWidth()&&f.y>=0&&f.y<=this.getCurrentHeight();e=a.__hitTestContext;e.setTransform(1,0,0,1,-b,-c);this._render(e,!1,!0);f=f||a.__hitTestTolerance;b=!1;try{e.getImageData(0,0,1,1).data[3]>=f&&(b=!0)}catch(g){trace("hitTestPoint:",this,g)}e.canvas.width=0;e.canvas.width=1;return b};a.prototype.hitTestObject=function(b,c,e){var f=this.getRect(this.getStage()),g=b.getRect(this.getStage());if(!c)return f.intersects(g);f=f.intersection(g);
e=e||a.__hitTestTolerance;if(f&&f.width>0&&f.height>0){c=!1;try{var i=a.__hitTestContext;i.canvas.width=f.width;i.canvas.height=f.height;i.setTransform(1,0,0,1,-f.x,-f.y);this._render(i,!1,!0);var h=i.getImageData(0,0,f.width,f.height).data;i.canvas.width=0;i.canvas.width=f.width;i.setTransform(1,0,0,1,-f.x,-f.y);b._render(i,!1,!0);for(var j=i.getImageData(0,0,f.width,f.height).data,b=0;b<h.length;){if((h[b]>0||h[b+1]>0||h[b+2]>0||h[b+3]>=e)&&(j[b]>0||j[b+1]>0||j[b+2]>0||j[b+3]>=e)){c=!0;break}b+=
4}}catch(k){}i.canvas.width=0;i.canvas.width=i.canvas.height=1;return c}return!1};a.prototype.getRect=function(b){b=this.localToTarget(0,0,b);return new Rectangle(b.x,b.y,this.getCurrentWidth(),this.getCurrentHeight())};a.prototype.onMouseEvent=null;a.prototype.toString=function(){return NameUtil.displayObjectToString(this)}})();(function(){var a=function(){casual.DisplayObject.call(this);this.children=[];this.mouseChildren=!0};casual.inherit(a,casual.DisplayObject);casual.DisplayObjectContainer=a;a.prototype.addChildAt=function(b,a){if(a<0)a=0;else if(a>this.children.length)a=this.children.length;var c=this.getChildIndex(b);if(c!=-1){if(c==a)return b;this.children.splice(c,1)}else b.parent&&b.parent.removeChild(b);this.children.splice(a,0,b);b.parent=this;return b};a.prototype.addChild=function(b){return this.addChildAt(b,
this.children.length)};a.prototype.removeChildAt=function(b){if(b<0||b>=this.children.length)return!1;var a=this.children[b];if(a!=null)a.parent=null,a.stage=null;this.children.splice(b,1);return!0};a.prototype.removeChild=function(b){return this.removeChildAt(this.children.indexOf(b))};a.prototype.removeChildByName=function(b){for(var a=0,c=this.children.length;a<c;a++)if(this.children[a].name==b)return this.removeChildAt(a);return null};a.prototype.removeAllChildren=function(){for(;this.children.length>
0;)this.removeChildAt(0)};a.prototype.getChildByName=function(b){for(var a=0,c=this.children.length;a<c;a++){var e=this.children[a];if(e.name==b)return e}return null};a.prototype.getChildAt=function(b){return b<0||b>=this.children.length?null:this.children[b]};a.prototype.getChildIndex=function(b){return this.children.indexOf(b)};a.prototype.setChildIndex=function(b,a){if(b.parent==this){var c=this.children.indexOf(b);a!=c&&(this.children.splice(c,1),this.children.splice(a,0,b))}};a.prototype.contains=
function(b){return this.getChildIndex(b)!=-1};a.prototype.getNumChildren=function(){return this.children.length};a.prototype.getObjectUnderPoint=function(b,d,c,e,f){if(f)var g=[];for(var i=this.children.length-1;i>=0;i--){var h=this.children[i];if(!(h==null||!h.mouseEnabled||!h.visible||h.alpha<=0))if(h instanceof a&&h.mouseChildren&&h.getNumChildren()>0){var j=h.getObjectUnderPoint(b,d,c,e,f);if(j)if(f)j.length>0&&(g=g.concat(j));else return j;else if(h.hitTestPoint(b,d,c,e))if(f)g.push(h);else return h}else if(h.hitTestPoint(b,
d,c,e))if(f)g.push(h);else return h}return f?g:null};a.prototype.render=function(b){for(var a=0,c=this.children.length;a<c;a++)this.children[a]._render(b)}})();(function(){var a=function(b){if(b==null)throw Error("Context can't be null!");casual.DisplayObjectContainer.call(this);this.name=NameUtil.createUniqueName("Stage");this.context=b;this.canvas=b.canvas;this.mouseY=this.mouseX=0;this.usePixelTrace=this.traceMouseTarget=!0;this.dragTarget=this.mouseTarget=null;this._frameRate=this._dragMouseY=this._dragMouseX=0;this._pauseInNextFrame=this._paused=!1;this.__intervalID=null;this.setFrameRate(20);casual.StageEvent.supportTouch()?(this.canvas.addEventListener("touchstart",
casual.delegate(this.__touchHandler,this),!1),this.canvas.addEventListener("touchmove",casual.delegate(this.__touchHandler,this),!1),this.canvas.addEventListener("touchend",casual.delegate(this.__touchHandler,this),!1)):(this.canvas.addEventListener("mousedown",casual.delegate(this.__mouseHandler,this),!1),this.canvas.addEventListener("mousemove",casual.delegate(this.__mouseHandler,this),!1),this.canvas.addEventListener("mouseup",casual.delegate(this.__mouseHandler,this),!1))};casual.inherit(a,casual.DisplayObjectContainer);
casual.Stage=a;a.prototype.setPaused=function(b,a){if(this._paused!=b)this._paused=b,this._pauseInNextFrame=a||!1};a.prototype.getPaused=function(){return this._paused};a.prototype.getFrameRate=function(){return this._frameRate};a.prototype.setFrameRate=function(b){if(this._frameRate!=b)this._frameRate=b,this.__intervalID!=null&&clearInterval(this.__intervalID),this.__intervalID=setInterval(casual.delegate(this.__enterFrame,this),1E3/this._frameRate)};a.prototype.__touchHandler=function(b){var a=
b.touches&&b.touches.length?b.touches[0]:b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(a){var c=a.pageY||a.clientY||a.screenY;this.mouseX=(a.pageX||a.clientX||a.screenX)-this.canvas.offsetLeft;this.mouseY=c-this.canvas.offsetTop}this.traceMouseTarget&&this.__getMouseTarget(b);a={target:this.mouseTarget||this,mouseX:this.mouseX,mouseY:this.mouseY,button:0};switch(b.type){case "touchstart":a.type="mousedown";break;case "touchmove":a.type="mousemove";break;case "touchend":a.type=
"mouseup"}a=casual.copy(b,casual.StageEvent,a);if(this.mouseTarget&&this.mouseTarget.onMouseEvent&&(this.mouseTarget.onMouseEvent(a),a.type=="mouseup"))this.mouseTarget.onMouseEvent(casual.copy(b,casual.StageEvent,{type:"mouseout"}));this.dispatchEvent(a);b.preventDefault();b.stopPropagation()};a.prototype.__mouseHandler=function(b){this.mouseX=b.pageX-this.canvas.offsetLeft;this.mouseY=b.pageY-this.canvas.offsetTop;this.traceMouseTarget&&b.type=="mousemove"&&this.__getMouseTarget(b);var a=casual.copy(b,
casual.StageEvent);a.target=a.currentTarget=this.mouseTarget||this;a.mouseX=this.mouseX;a.mouseY=this.mouseY;if(this.mouseTarget&&this.mouseTarget.onMouseEvent)this.mouseTarget.onMouseEvent(a);this.setCursor(this.mouseTarget&&this.mouseTarget.useHandCursor?"pointer":"");this.dispatchEvent(a);b.preventDefault();b.stopPropagation()};a.prototype.__getMouseTarget=function(b){var a=this.getObjectUnderPoint(this.mouseX,this.mouseY,this.usePixelTrace),c=this.mouseTarget;this.mouseTarget=a;if(c&&c.onMouseEvent&&
c!=a)b=casual.copy(b,casual.StageEvent),b.type="mouseout",b.target=b.currentTarget=c,b.mouseX=this.mouseX,b.mouseY=this.mouseY,c.onMouseEvent(b)};a.prototype.__enterFrame=function(){if(!this._paused||this._pauseInNextFrame)if(this.dispatchEvent(new StageEvent(StageEvent.ENTER_FRAME)),(!this._paused||this._pauseInNextFrame)&&this._render(this.context,!0),this._frameRate<=0)clearInterval(this.__intervalID),this.__intervalID=null};a.prototype.render=function(b,d){if(!b)b=this.context;d?this.clear(d.x,
d.y,d.width,d.height):this.clear();if(this.dragTarget)this.dragTarget.x=this.mouseX-this._dragMouseX,this.dragTarget.y=this.mouseY-this._dragMouseY;a.superClass.render.call(this,b);if(this._pauseInNextFrame)this._paused=!0,this._pauseInNextFrame=!1};a.prototype.startDrag=function(b){this.dragTarget=b;b=this.dragTarget.globalToLocal(this.mouseX,this.mouseY);this._dragMouseX=b.x;this._dragMouseY=b.y};a.prototype.stopDrag=function(){this.dragTarget=null};a.prototype.setCursor=function(b){this.canvas.style.cursor=
b};a.prototype.clear=function(b,a,c,e){arguments.length>=4?this.context.clearRect(b,a,c,e):this.context.clearRect(0,0,this.canvas.width,this.canvas.height)};a.prototype.getStageWidth=function(){return this.canvas.width};a.prototype.getStageHeight=function(){return this.canvas.height}})();(function(){var a=function(b,a){casual.DisplayObject.call(this);this.name=NameUtil.createUniqueName("Bitmap");this.mouseEnabled=!1;this.image=b;this.frame=a?a:[0,0,b.width,b.height];this.width=this.frame[2];this.height=this.frame[3];this.regX=this.frame[4]||0;this.regY=this.frame[5]||0};casual.inherit(a,casual.DisplayObject);casual.Bitmap=a;a.prototype.render=function(b){b.drawImage(this.image,this.frame[0],this.frame[1],this.frame[2],this.frame[3],0,0,this.width,this.height)}})();(function(){var a=function(){casual.DisplayObjectContainer.call(this);this.name=NameUtil.createUniqueName("Sprite")};casual.inherit(a,casual.DisplayObjectContainer);casual.Sprite=a})();(function(){var a=function(b,a,c,e,f){this.disObj=b;this.label=a||null;this.gotoFrame=c||0;this.pauseFrames=e||0;this.stop=f||!1};casual.Frame=a;a.prototype.render=function(b,a,c){if(a!=void 0)this.disObj.x=a;if(c!=void 0)this.disObj.y=c;this.disObj._render(b,!1,!1)}})();(function(){var a=function(b){casual.Sprite.call(this);this.name=NameUtil.createUniqueName("MovieClip");this._frameLables={};this._frames=[];b&&this.addFrame(b);this.currentFrame=1;this._frameDisObj=null;this._pauseFrames=0;this._paused=!1};casual.inherit(a,casual.Sprite);casual.MovieClip=a;a.prototype.addFrame=function(b){if(b[0]instanceof casual.Frame||b[0]instanceof Array)for(var a in b)this.addFrame(b[a]);else this.setFrame(this._frames.length+1,b);return this};a.prototype.addFrameAt=function(b,
a){this._frames.splice(a,0,null);this.setFrame(a+1,b)};a.prototype.setFrame=function(b,a){var c;c=a instanceof casual.Frame?a:new casual.Frame(a);this._frames[b-1]=c;c.label&&(this._frameLables[c.label]=c);if(b==1)this._frameDisObj=c.disObj,this.width=Math.max(this.width,this._frameDisObj.width),this.height=Math.max(this.height,this._frameDisObj.height)};a.prototype.getFrameNumber=function(b){if(typeof b=="number")return b;var a=b;typeof a=="string"&&(a=this._frameLables[b]);for(b=0;b<this._frames.length;b++)if(a==
this._frames[b])return b+1;return-1};a.prototype.getFrame=function(b){return typeof b=="number"?this._frames[b-1]:this._frameLables[b]};a.prototype.removeFrame=function(b){var a=this.getFrame(b);a.label&&(b=this.getFrameNumber(a),delete this._frameLables[a.label]);this._frames.splice(b-1,1)};a.prototype.getTotalFrames=function(){return this._frames.length};a.prototype.nextFrame=function(){var b=this.getFrame(this.currentFrame);if(b.pauseFrames)b.pauseFrames>this._pauseFrames?this._pauseFrames++:this._pauseFrames=
0;return b.gotoFrame&&(this._pauseFrames==0||!b.pauseFrames)?this.currentFrame=this.getFrameNumber(b.gotoFrame):b.pauseFrames&&this._pauseFrames>0?this.currentFrame:this.currentFrame>=this._frames.length?this.currentFrame=1:++this.currentFrame};a.prototype.play=function(){this._paused=!1};a.prototype.stop=function(){this._paused=!0};a.prototype.gotoAndStop=function(b){this.currentFrame=this.getFrameNumber(b);this._paused=!0};a.prototype.gotoAndPlay=function(b){this.currentFrame=this.getFrameNumber(b);
this._paused=!1};a.prototype.render=function(b){var d=this.getFrame(this.currentFrame);this._frameDisObj&&this._frameDisObj!=d.disObj&&this.removeChild(this._frameDisObj);this.addChildAt(d.disObj,0);this._frameDisObj=d.disObj;this.width=Math.max(this.width,this._frameDisObj.width);this.height=Math.max(this.height,this._frameDisObj.height);d.stop&&this.stop();a.superClass.render.call(this,b);!this._paused&&b==this.getStage().context&&this.nextFrame()}})();(function(){var a=function(){this.name=NameUtil.createUniqueName("Graphics");var b=document.createElement("canvas");b.width=1E3;b.height=1E3;this._context=b.getContext("2d");a._init(this,this._context)};casual.Graphics=a;a.prototype._proxy=function(b,a,c){this[a]=function(){return b[a].apply(b,arguments)||this};c&&(this[c]=this[a])};a._init=function(b,a){b._proxy(a,"beginPath");b._proxy(a,"closePath");b._proxy(a,"stroke");b._proxy(a,"fill");b._proxy(a,"moveTo");b._proxy(a,"lineTo");b._proxy(a,"arcTo");
b._proxy(a,"arc");b._proxy(a,"quadraticCurveTo","curveTo");b._proxy(a,"bezierCurveTo");b._proxy(a,"rect");b._proxy(a,"createLinearGradient");b._proxy(a,"createRadialGradient");b._proxy(a,"createPattern");b.fillStyle=null;b.strokeStyle=null;b.fillAlpha=1;b.lineAlpha=1;b.lineWidth=1};a.prototype.lineStyle=function(b,a,c,e,f,g){this.lineWidth=this._context.lineWidth=b||1;this.strokeStyle=this._context.strokeStyle=a||"0";this.lineAlpha=c||1;if(e!=void 0)this._context.lineCap=e;if(f!=void 0)this._context.lineJoin=
f;if(g!=void 0)this._context.miterLimit=g;return this};a.prototype.beginLinearGradientFill=function(b,a,c,e,f,g){b=this.createLinearGradient(b,a,c,e);a=0;for(c=f.length;a<c;a++)b.addColorStop(g[a],f[a]);this.fillStyle=b;return this};a.prototype.beginRadialGradientFill=function(b,a,c,e,f,g,i,h){b=this.createRadialGradient(b,a,c,e,f,g);a=0;for(c=i.length;a<c;a++)b.addColorStop(h[a],i[a]);this.fillStyle=b;return this};a.prototype.beginBitmapFill=function(b,a){this.fillStyle=this.createPattern(b,a||"");
return this};a.prototype.beginFill=function(b,a){if(b)this.fillStyle=this._context.fillStyle=b;this.fillAlpha=a||1;return this};a.prototype.endFill=function(){if(this.strokeStyle)this._context.strokeStyle=this.strokeStyle,this._context.globalAlpha=this.lineAlpha,this._context.stroke();if(this.fillStyle)this._context.fillStyle=this.fillStyle,this._context.globalAlpha=this.fillAlpha,this._context.fill();return this};a.prototype.drawRect=function(b,a,c,e){this.beginPath();this.rect(b,a,c,e);this.closePath();
this.endFill();return this};a.prototype.drawRoundRect=function(b,a,c,e,f){return this.drawRoundRectComplex(b,a,c,e,f,f,f,f)};a.prototype.drawRoundRectComplex=function(b,a,c,e,f,g,i,h){this.beginPath();this.moveTo(b+f,a);this.lineTo(b+c-g,a);this.arc(b+c-g,a+g,g,-Math.PI/2,0,!1);this.lineTo(b+c,a+e-i);this.arc(b+c-i,a+e-i,i,0,Math.PI/2,!1);this.lineTo(b+h,a+e);this.arc(b+h,a+e-h,h,Math.PI/2,Math.PI,!1);this.lineTo(b,a+f);this.arc(b+f,a+f,f,Math.PI,Math.PI*3/2,!1);this.closePath();this.endFill();return this};
a.prototype.drawCircle=function(b,a,c){this.beginPath();this.arc(b+c,a+c,c,0,Math.PI*2,0);this.closePath();this.endFill();return this};a.prototype.drawEllipse=function(b,a,c,e){if(c==e)return this.drawCircle(b,a,c);c/=2;e/=2;var f=0.5522847498307933*c,g=0.5522847498307933*e;b+=c;a+=e;this.beginPath();this.moveTo(b+c,a);this.bezierCurveTo(b+c,a-g,b+f,a-e,b,a-e);this.bezierCurveTo(b-f,a-e,b-c,a-g,b-c,a);this.bezierCurveTo(b-c,a+g,b-f,a+e,b,a+e);this.bezierCurveTo(b+f,a+e,b+c,a+g,b+c,a);this.closePath();
this.endFill();return this};a.prototype.get=function(){return this._context.canvas};a.prototype.setSize=function(a,d){this._context.save();if(a!=void 0)this._context.canvas.width=a;if(d!=void 0)this._context.canvas.height=d;this._context.restore();return this};a.prototype.clear=function(){this._context.clearRect(0,0,this._context.canvas.width,this._context.canvas.height);this._context.restore();return this}})();(function(){var a=function(a){casual.DisplayObject.call(this);this.name=NameUtil.createUniqueName("Shape");this.mouseEnabled=!1;this.graphics=a||new casual.Graphics};casual.inherit(a,casual.DisplayObject);casual.Shape=a;a.prototype.render=function(a){a.drawImage(this.graphics.get(),0,0)}})();(function(){var a=function(a,d,c){casual.DisplayObject.call(this);this.name=NameUtil.createUniqueName("Text");this.text=a;this.color=d||"#000";this.font=c||"12px Arial";this.align="start";this.baseline="alphabetic";this.maxWidth=null;this.outline=!1};casual.inherit(a,casual.DisplayObject);casual.Text=a;a.prototype.render=function(a){if(this.text&&this.text.length!=0)this.outline?a.strokeStyle=this.color:a.fillStyle=this.color,a.font=this.font,a.textAlign=this.align,a.textBaseline=this.baseline,this.outline?
a.strokeText(this.text,0,0,this.maxWidth):a.fillText(this.text,0,0,this.maxWidth)};a.prototype.getWidth=function(a){return!this.text||this.text.length==0?0:a.measureText(this.text).width}})();(function(){var a=function(b,d,c,e){casual.MovieClip.call(this);this.name=NameUtil.createUniqueName("Button");b&&this.setUpState(b);d&&this.setOverState(d);c&&this.setDownState(c);e&&this.setDisabledState(e);this.state=a.state.UP;this.enabled=!0;this.mouseChildren=!1;this.useHandCursor=!0;this.stop()};casual.inherit(a,casual.MovieClip);casual.Button=a;a.state={UP:"up",OVER:"over",DOWN:"down",DISABLED:"disabled"};a.prototype.setUpState=function(b){this.addFrameAt(new casual.Frame(b,a.state.UP),0);
this.upState=b;return this};a.prototype.setOverState=function(b){this.addFrameAt(new casual.Frame(b,a.state.OVER),1);this.overState=b;return this};a.prototype.setDownState=function(b){this.addFrameAt(new casual.Frame(b,a.state.DOWN),2);this.downState=b;return this};a.prototype.setDisabledState=function(b){this.addFrameAt(new casual.Frame(b,a.state.DISABLED),3);this.disabledState=b;return this};a.prototype.setEnabled=function(b){if(this.enabled==b)return this;(this.mouseEnabled=this.enabled=b)?this.currentFrame==
4&&this.gotoAndStop(a.state.UP):this.disabledState?this.gotoAndStop(a.state.DISABLED):this.gotoAndStop(a.state.UP);return this};a.prototype.setState=function(b){if(this.state!=b)switch(this.state=b,b){case a.state.OVER:case a.state.DOWN:case a.state.UP:if(!this.enabled)this.mouseEnabled=this.enabled=!0;this.gotoAndStop(b);break;case a.state.DISABLED:this.setEnabled(!1)}};a.prototype.onMouseEvent=function(b){if(this.enabled)switch(b.type){case "mousemove":if(this.onMouseOver&&this.state!=a.state.OVER)b.type=
"mouseover",this.onMouseOver(b);else if(this.onMouseMove&&this.state==a.state.OVER)this.onMouseMove(b);this.overState&&this.state==a.state.UP&&this.setState(a.state.OVER);break;case "mouseout":this.upState&&this.setState(a.state.UP);if(this.onMouseOut)b.type="mouseout",this.onMouseOut(b);break;case "mousedown":this.downState&&this.setState(a.state.DOWN);if(this.onMouseDown)this.onMouseDown(b);break;case "mouseup":if(this.overState?this.setState(a.state.OVER):this.setState(a.state.UP),this.onMouseUp)this.onMouseUp(b)}};
a.prototype.onMouseMove=null;a.prototype.onMouseOver=null;a.prototype.onMouseOut=null;a.prototype.onMouseDown=null;a.prototype.onMouseUp=null})();(function(){function a(a,e){window[a]!=void 0&&(b[a]=window[a]);d[a]=window[a]=(e||casual)[a]}var b={},d={};casual.noConflict=function(){for(var a in d)b[a]!=void 0?window[a]=b[a]:delete window[a]};a("trace");a("EventBase");a("StageEvent");a("EventDispatcher");a("Matrix");a("Point");a("Rectangle");a("NameUtil");a("DisplayObject");a("DisplayObjectContainer");a("Graphics");a("Shape");a("Bitmap");a("Sprite");a("Frame");a("MovieClip");a("Stage");a("Text");a("Button")})();
